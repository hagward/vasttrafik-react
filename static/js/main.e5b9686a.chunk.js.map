{"version":3,"sources":["util.ts","components/TripDetails.module.css","components/TripOverview.module.css","features/search/searchSlice.ts","components/SearchBar.module.css","features/trips/tripsSlice.ts","components/LocationSearchInput.module.css","app/App.module.css","settings.ts","api.ts","Auth.ts","components/DatetimeInput.module.css","components/Input.module.css","components/LocationInput.module.css","components/SearchResult.module.css","components/Location.module.css","components/LocationSearch.module.css","app/store.ts","app/rootReducer.ts","components/LocationList.module.css","components/LocationListItem.module.css","components/TripList.module.css","components/TripListItem.module.css","index.tsx","components/Input.tsx","components/DatetimeInput.tsx","components/Location.tsx","MruCache.ts","components/LocationListItem.tsx","components/LocationList.tsx","components/LocationSearchInput.tsx","components/LocationSearch.tsx","hooks.ts","components/Modal.tsx","components/LocationInput.tsx","components/SearchBar.tsx","components/TripDetails.tsx","components/TripOverview.tsx","components/TripListItem.tsx","components/TripList.tsx","components/SearchResult.tsx","app/App.tsx"],"names":["list","object","Array","isArray","first","array","last","length","merge","a","b","compare","result","i","j","push","removeDuplicates","id","set","Set","item","itemId","has","add","padNumber","n","module","exports","initialState","origin","name","destination","date","Date","toISOString","now","search","createSlice","reducers","setDate","state","action","payload","setLocation","location","switchLocations","actions","trips","loading","error","clearTrips","getTripsStart","getTripsSuccess","getTripsFailure","fetchTrips","dest","dispatch","getTrips","tripsResponse","TripList","Error","parseResponse","response","Trip","trip","Leg","leg","Origin","Notes","Note","Destination","settings","key","secret","auth","token","this","expiryDate","Promise","resolve","reject","storedToken","getStoredToken","signIn","then","json","Number","expires_in","access_token","storeToken","localStorage","getItem","headers","Headers","Authorization","btoa","fetch","body","scope","method","generateScope","setItem","Math","random","toString","slice","String","searchLocation","searchString","getToken","url","encodeURIComponent","dateString","dayjs","format","timeString","getLocationParameter","inputName","lat","lon","localStorageState","window","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","api","next","JSON","stringify","getState","preloadedState","parse","undefined","combineReducers","searchReducer","tripsReducer","App","require","default","ReactDOM","render","StrictMode","document","getElementById","Input","props","className","styles","wrapper","inputIcon","icon","input","DatetimeInput","onChange","onNowButtonClick","value","faCalendarAlt","type","event","target","toDate","nowOverlay","nowButton","onClick","Location","split","station","address","MruCache","limit","items","mru","removeExistingItem","unshift","ensureLengthWithinLimit","setMostRecentlyUsed","find","toLowerCase","startsWith","existingIndex","findIndex","existingItem","splice","LocationListItem","stopPropagation","LocationList","locations","onSelect","map","LocationSearchInput","onCancel","faMapMarkerAlt","placeholder","ref","setTimeout","focus","cancelButton","LocationSearch","recentLocations","useState","getMostRecentlyUsed","locationState","setLocationState","searchValue","setSearchValue","quickLocation","setQuickLocation","debouncedSearchValue","delay","debouncedValue","setDebouncedValue","useEffect","handler","clearTimeout","useDebounce","handleSelect","coordLocations","CoordLocation","stopLocations","StopLocation","idx","getFirstMatch","allLocations","results","renderResults","Modal","children","el","createElement","getElementsByTagName","modalRoot","classList","appendChild","remove","removeChild","createPortal","LocationInput","disabled","selected","overlay","setOverlay","handleCancel","classnames","fakeInput","static","onFocus","SearchBar","searching","onDatetimeChange","onLocationChange","onLocationSwitch","onSearch","inputs","switchLocationsButton","switchLocationsIcon","faExchangeAlt","rotation","datetime","searchButton","spinnerIcon","faSpinner","spin","TripDetails","renderLocation","overview","time","track","notes","note","index","$","legs","filter","direction","renderLeg","TripOverview","renderTime","renderInfoIcon","rtTime","notesIcon","faInfoCircle","invalid","some","sname","style","backgroundColor","fgColor","borderColor","color","bgColor","faArrowRight","travelTime","start","end","startDate","rtDate","endDate","hourDiff","diff","minuteDiff","TripListItem","expanded","setExpanded","tripIndex","SearchResult","earlierLaterButtons","earlierLaterButton","onShowEarlier","onShowLater","ErrorMessage","useDispatch","useSelector","tripsLoading","tripsError","searchOrigin","searchDestination","searchDate","searchNow","handleDatetimeChange","handleLocationChange","handleNowButtonClick","handleSwitchLocations","handleSearch","findEarlierTrips","searchAddMinutes","findLaterTrips","minutes","newDate","app","navbar","logo","faBus"],"mappings":"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","file":"static/js/main.e5b9686a.chunk.js","sourcesContent":["export function list<T>(object: T): T[] {\n  if (!object) {\n    return [];\n  }\n  return Array.isArray(object) ? object : [object];\n}\n\nexport function first<T>(array: T[]): T {\n  return array[0];\n}\n\nexport function last<T>(array: T[]): T {\n  return array[array.length - 1];\n}\n\nexport function merge<T>(\n  a: T[],\n  b: T[],\n  compare: (e1: T, e2: T) => number\n): T[] {\n  const result = [];\n  let i = 0;\n  let j = 0;\n  while (i < a.length && j < b.length) {\n    result.push(compare(a[i], b[j]) <= 0 ? a[i++] : b[j++]);\n  }\n  while (i < a.length) {\n    result.push(a[i++]);\n  }\n  while (j < b.length) {\n    result.push(b[j++]);\n  }\n  return result;\n}\n\nexport function removeDuplicates<T>(array: T[], id: (e: T) => string): T[] {\n  const result: T[] = [];\n  const set = new Set<string>();\n  for (const item of array) {\n    const itemId = id(item);\n    if (!set.has(itemId)) {\n      result.push(item);\n    }\n    set.add(itemId);\n  }\n  return result;\n}\n\nexport function shortLocation(locationName: string): string {\n  return locationName.split(\",\")[0];\n}\n\nexport function padNumber(n: number): string {\n  return n < 10 ? \"0\" + n : \"\" + n;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"legs\":\"TripDetails_legs__3EAG4\",\"leg\":\"TripDetails_leg__3RYui\",\"direction\":\"TripDetails_direction__nETYo\",\"track\":\"TripDetails_track__3u51Y\",\"overview\":\"TripDetails_overview__3QAnu\",\"location\":\"TripDetails_location__3weSf\",\"time\":\"TripDetails_time__3LcKt\",\"name\":\"TripDetails_name__3k2bV\",\"notes\":\"TripDetails_notes__2gw9C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overview\":\"TripOverview_overview___kW70\",\"origin\":\"TripOverview_origin__1YlZ5\",\"destination\":\"TripOverview_destination__guSIV\",\"invalid\":\"TripOverview_invalid__1q6Bi\",\"notesIcon\":\"TripOverview_notesIcon__1nrtU\",\"legs\":\"TripOverview_legs__1MaC0\",\"travelTime\":\"TripOverview_travelTime__18eQF\",\"leg\":\"TripOverview_leg__15Ba1\"};","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface SearchState {\n  origin: CoordLocation;\n  destination: CoordLocation;\n  date: string;\n  now: boolean;\n}\n\nexport interface CoordLocation {\n  id?: string;\n  idx?: string;\n  lat?: string;\n  lon?: string;\n  name: string;\n}\n\nexport interface StopLocation extends CoordLocation {\n  id: string;\n}\n\nexport type LocationName = \"origin\" | \"destination\";\n\nconst initialState: SearchState = {\n  origin: { name: \"\" },\n  destination: { name: \"\" },\n  date: new Date().toISOString(),\n  now: true,\n};\n\nconst search = createSlice({\n  name: \"search\",\n  initialState,\n  reducers: {\n    setDate(state, action: PayloadAction<{ date: string; now: boolean }>) {\n      const { date, now } = action.payload;\n      state.date = date;\n      state.now = now;\n    },\n    setLocation(\n      state,\n      action: PayloadAction<{\n        name: LocationName;\n        location: CoordLocation;\n      }>\n    ) {\n      const { name, location } = action.payload;\n      state[name] = location;\n    },\n    switchLocations(state) {\n      const origin = state.origin;\n      state.origin = state.destination;\n      state.destination = origin;\n    },\n  },\n});\n\nexport const { setDate, setLocation, switchLocations } = search.actions;\nexport default search.reducer;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"locations\":\"SearchBar_locations__CSxHQ\",\"datetime\":\"SearchBar_datetime__2SP0R\",\"search\":\"SearchBar_search__22_iH\",\"switchLocationsButton\":\"SearchBar_switchLocationsButton__1Gqfa\",\"switchLocationsIcon\":\"SearchBar_switchLocationsIcon__1eBNU\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"spinnerIcon\":\"SearchBar_spinnerIcon__2MG7m\",\"searching\":\"SearchBar_searching__8o1tj\"};","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { getTrips } from \"../../api\";\nimport { AppThunk } from \"../../app/store\";\nimport { list } from \"../../util\";\nimport { CoordLocation } from \"../search/searchSlice\";\n\ninterface TripsState {\n  trips: Trip[];\n  loading: boolean;\n  error: string | null;\n}\n\nexport interface Trip {\n  Leg: Leg[];\n}\n\nexport interface Leg {\n  Origin: Location;\n  Destination: Location;\n  direction: string;\n  name: string;\n  sname: string;\n  fgColor: string;\n  bgColor: string;\n  type: string;\n}\n\nexport interface Location {\n  date: string;\n  name: string;\n  Notes?: { Note: Note[] };\n  rtDate?: string;\n  rtTime?: string;\n  time: string;\n  track?: string;\n}\n\ninterface Note {\n  $: string;\n  key: string;\n  priority: string;\n  severity: string;\n}\n\nconst initialState: TripsState = {\n  trips: [],\n  loading: false,\n  error: null,\n};\n\nconst trips = createSlice({\n  name: \"trips\",\n  initialState,\n  reducers: {\n    clearTrips(state) {\n      state.trips = [];\n      state.loading = false;\n      state.error = null;\n    },\n    getTripsStart(state) {\n      state.loading = true;\n      state.error = null;\n    },\n    getTripsSuccess(state, action: PayloadAction<Trip[]>) {\n      state.trips = action.payload;\n      state.loading = false;\n      state.error = null;\n    },\n    getTripsFailure(state, action: PayloadAction<string>) {\n      state.loading = false;\n      state.error = action.payload;\n    },\n  },\n});\n\nexport const {\n  clearTrips,\n  getTripsStart,\n  getTripsSuccess,\n  getTripsFailure,\n} = trips.actions;\nexport default trips.reducer;\n\nexport const fetchTrips = (\n  origin: CoordLocation,\n  dest: CoordLocation,\n  date: Date\n): AppThunk => async (dispatch) => {\n  try {\n    dispatch(getTripsStart());\n\n    const tripsResponse = await getTrips(origin, dest, date);\n\n    if (tripsResponse.TripList.error) {\n      throw new Error(tripsResponse.TripList.error);\n    }\n\n    const trips = parseResponse(tripsResponse);\n    dispatch(getTripsSuccess(trips));\n  } catch (err) {\n    dispatch(getTripsFailure(err));\n  }\n};\n\nfunction parseResponse(response: any): Trip[] {\n  const trips: any[] = list(response.TripList.Trip);\n\n  for (const trip of trips) {\n    trip.Leg = list(trip.Leg);\n    for (const leg of trip.Leg) {\n      if (leg.Origin.Notes) {\n        leg.Origin.Notes.Note = list(leg.Origin.Notes.Note);\n      }\n      if (leg.Destination.Notes) {\n        leg.Destination.Notes.Note = list(leg.Destination.Notes.Note);\n      }\n    }\n  }\n\n  return trips;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LocationSearchInput_wrapper__2djFY\",\"icon\":\"LocationSearchInput_icon__1yItC\",\"input\":\"LocationSearchInput_input__2QYj6\",\"cancelButton\":\"LocationSearchInput_cancelButton__392il\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3fr4t\",\"navbar\":\"App_navbar__1wWm4\",\"logo\":\"App_logo__3ajY5\",\"error\":\"App_error__2t8In\"};","const settings = {\n  key: \"d9k7BQPB7_5nIsjU9d7Y0IkFIqUa\",\n  secret: \"Ksgx8WdEnn9gjp9Sqln72WgbQdUa\",\n};\n\nexport default settings;\n","import dayjs from \"dayjs\";\nimport Auth from \"./Auth\";\nimport { CoordLocation } from \"./features/search/searchSlice\";\nimport settings from \"./settings\";\n\nconst auth = new Auth(settings.key, settings.secret);\n\nexport async function searchLocation(searchString: string) {\n  const token = await auth.getToken();\n  const url =\n    \"https://api.vasttrafik.se/bin/rest.exe/v2/location.name\" +\n    \"?format=json&input=\" +\n    encodeURIComponent(searchString);\n\n  const response = await fetch(url, {\n    headers: new Headers({ Authorization: \"Bearer \" + token }),\n    method: \"GET\",\n  });\n  return response.json();\n}\n\nexport async function getTrips(\n  origin: CoordLocation,\n  dest: CoordLocation,\n  date: Date\n) {\n  const token = await auth.getToken();\n  const dateString = dayjs(date).format(\"YYYY-MM-DD\");\n  const timeString = dayjs(date).format(\"HH:mm\");\n  const url =\n    \"https://api.vasttrafik.se/bin/rest.exe/v2/trip?format=json\" +\n    getLocationParameter(\"origin\", origin) +\n    getLocationParameter(\"dest\", dest) +\n    \"&date=\" +\n    encodeURIComponent(dateString) +\n    \"&time=\" +\n    encodeURIComponent(timeString);\n\n  const response = await fetch(url, {\n    headers: new Headers({ Authorization: \"Bearer \" + token }),\n    method: \"GET\",\n  });\n  return response.json();\n}\n\nfunction getLocationParameter(\n  inputName: string,\n  location: CoordLocation\n): string {\n  if (location.id) {\n    return \"&\" + inputName + \"Id=\" + encodeURIComponent(location.id);\n  } else if (location.lat && location.lon) {\n    return (\n      \"&\" +\n      inputName +\n      \"CoordName=\" +\n      encodeURIComponent(location.name) +\n      \"&\" +\n      inputName +\n      \"CoordLat=\" +\n      encodeURIComponent(location.lat) +\n      \"&\" +\n      inputName +\n      \"CoordLong=\" +\n      encodeURIComponent(location.lon)\n    );\n  } else {\n    return \"\";\n  }\n}\n","interface AuthToken {\n  expiryDate: number;\n  token: string;\n}\n\nexport default class Auth {\n  private key: string;\n  private secret: string;\n  private token: AuthToken;\n\n  constructor(key: string, secret: string) {\n    this.key = key;\n    this.secret = secret;\n    this.token = {\n      expiryDate: 0,\n      token: \"\"\n    };\n  }\n\n  public getToken(): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      const storedToken = this.getStoredToken();\n      if (Date.now() < storedToken.expiryDate) {\n        resolve(storedToken.token);\n      } else {\n        this.signIn()\n          .then(response => response.json())\n          .then(json => {\n            this.token = {\n              expiryDate: Date.now() + Number(json.expires_in) * 1000,\n              token: json.access_token\n            };\n            this.storeToken();\n\n            resolve(this.token.token);\n          });\n      }\n    });\n  }\n\n  private getStoredToken(): AuthToken {\n    return {\n      expiryDate: Number(localStorage.getItem(\"tokenExpiryDate\")),\n      token: localStorage.getItem(\"token\") as string\n    };\n  }\n\n  private signIn(): Promise<Response> {\n    const headers = new Headers({\n      Authorization: \"Basic \" + btoa(this.key + \":\" + this.secret),\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    });\n\n    return fetch(\"https://api.vasttrafik.se:443/token\", {\n      body: \"grant_type=client_credentials&scope=\" + this.scope(),\n      headers,\n      method: \"POST\"\n    });\n  }\n\n  private scope(): string {\n    let scope = localStorage.getItem(\"scope\");\n    if (!scope) {\n      scope = this.generateScope();\n      localStorage.setItem(\"scope\", scope);\n    }\n    return scope;\n  }\n\n  private generateScope(): string {\n    return Math.random()\n      .toString(36)\n      .slice(2);\n  }\n\n  private storeToken(): void {\n    localStorage.setItem(\"token\", this.token.token);\n    localStorage.setItem(\"tokenExpiryDate\", String(this.token.expiryDate));\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DatetimeInput_wrapper__XqBGi\",\"nowButton\":\"DatetimeInput_nowButton__23SMg\",\"nowOverlay\":\"DatetimeInput_nowOverlay__1vweV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Input_wrapper__2o0fD\",\"input\":\"Input_input__24dvw\",\"inputIcon\":\"Input_inputIcon__3Fr-L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LocationInput_wrapper__22Kag\",\"fakeInput\":\"LocationInput_fakeInput__2YPHy\",\"static\":\"LocationInput_static__2Xnyu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"earlierLaterButtons\":\"SearchResult_earlierLaterButtons__2UOOe\",\"earlierLaterButton\":\"SearchResult_earlierLaterButton__15iUV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"location\":\"Location_location__18UtO\",\"address\":\"Location_address__1BjE9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"LocationSearch_search__nxx0-\",\"results\":\"LocationSearch_results__ypv_A\"};","import {\n  Action,\n  configureStore,\n  getDefaultMiddleware,\n  Middleware,\n  ThunkAction,\n} from \"@reduxjs/toolkit\";\nimport rootReducer, { RootState } from \"./rootReducer\";\n\nconst localStorageSaver: Middleware = (api) => (next) => (action) => {\n  const dispatch = next(action);\n\n  window.localStorage.setItem(\"state\", JSON.stringify(api.getState()));\n\n  return dispatch;\n};\n\nconst localStorageState = window.localStorage.getItem(\"state\");\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: [...getDefaultMiddleware(), localStorageSaver],\n  preloadedState: localStorageState ? JSON.parse(localStorageState) : undefined,\n});\n\nconst m = module as any;\nif (process.env.NODE_ENV === \"development\" && m.hot) {\n  m.hot.accept(\"./rootReducer\", () => {\n    const newRootReducer = require(\"./rootReducer\").default;\n    store.replaceReducer(newRootReducer);\n  });\n}\n\nexport type AppDispatch = typeof store.dispatch;\nexport type AppThunk = ThunkAction<void, RootState, unknown, Action<string>>;\n\nexport default store;\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport searchReducer from \"../features/search/searchSlice\";\nimport tripsReducer from \"../features/trips/tripsSlice\";\n\nconst rootReducer = combineReducers({\n  search: searchReducer,\n  trips: tripsReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"LocationList_list__1GHD9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"LocationListItem_item__LweBU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"TripList_list__UIk8G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"TripListItem_item__104lt\"};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./app/store\";\nimport \"./index.css\";\n\nconst render = () => {\n  const App = require(\"./app/App\").default;\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"app-root\")\n  );\n};\n\nrender();\n\nconst m = module as any;\nif (process.env.NODE_ENV === \"development\" && m.hot) {\n  m.hot.accept(\"./app/App\", render);\n}\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styles from \"./Input.module.css\";\n\ninterface Props {\n  className?: string;\n  icon: IconProp;\n  placeholder?: string;\n  readOnly?: boolean;\n  type: string;\n  value: string;\n  onChange?(event: React.FormEvent<HTMLInputElement>): any;\n  onFocus?(event: React.FocusEvent<HTMLInputElement>): any;\n}\n\nexport const Input = (props: Props) => {\n  return (\n    <div className={styles.wrapper}>\n      <FontAwesomeIcon className={styles.inputIcon} icon={props.icon} />\n      <input className={styles.input} {...props} />\n    </div>\n  );\n};\n","import { faCalendarAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport dayjs from \"dayjs\";\nimport React from \"react\";\nimport styles from \"./DatetimeInput.module.css\";\nimport { Input } from \"./Input\";\n\ninterface Props {\n  date: Date;\n  now: boolean;\n  onChange(date: Date): void;\n  onNowButtonClick(): void;\n}\n\nexport const DatetimeInput = ({\n  date,\n  now,\n  onChange,\n  onNowButtonClick\n}: Props) => {\n  const value = dayjs(date).format(\"YYYY-MM-DDTHH:mm:ss\");\n\n  function renderNowOverlay() {\n    return <div className={styles.nowOverlay}>Avgår nu</div>;\n  }\n\n  function renderNowButton() {\n    return (\n      <button className={styles.nowButton} onClick={onNowButtonClick}>\n        Nu\n      </button>\n    );\n  }\n\n  function handleChange(event: React.FormEvent<HTMLInputElement>) {\n    const target = event.target as HTMLInputElement;\n    onChange(dayjs(target.value).toDate());\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Input\n        icon={faCalendarAlt}\n        type=\"datetime-local\"\n        value={value}\n        onChange={handleChange}\n      />\n      {now ? renderNowOverlay() : renderNowButton()}\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./Location.module.css\";\n\ninterface Props {\n  name: string;\n}\n\nexport const Location = ({ name }: Props) => {\n  const [station, address] = name.split(\", \");\n  return (\n    <div className={styles.location}>\n      <div>{station}</div>\n      {address && <div className={styles.address}>{address}</div>}\n    </div>\n  );\n};\n","interface CacheItem {\n  id: string;\n  name: string;\n}\n\nexport default class MruCache<T extends CacheItem> {\n  private items: T[];\n  private limit: number;\n\n  constructor(limit: number) {\n    this.limit = limit;\n\n    const mru = localStorage.getItem(\"mru\");\n    this.items = mru ? JSON.parse(mru) : [];\n  }\n\n  public add(item: T): void {\n    this.removeExistingItem(item);\n    this.items.unshift(item);\n    this.ensureLengthWithinLimit();\n    this.setMostRecentlyUsed();\n  }\n\n  public getMostRecentlyUsed(): T[] {\n    return this.items;\n  }\n\n  public setMostRecentlyUsed(): void {\n    localStorage.setItem(\"mru\", JSON.stringify(this.items));\n  }\n\n  public getFirstMatch(searchString: string): T | undefined {\n    return this.items.find(item =>\n      item.name.toLowerCase().startsWith(searchString.toLowerCase())\n    );\n  }\n\n  private removeExistingItem(item: T): void {\n    const existingIndex = this.items.findIndex(\n      existingItem => existingItem.id === item.id\n    );\n    if (existingIndex > -1) {\n      this.items.splice(existingIndex, 1);\n    }\n  }\n\n  private ensureLengthWithinLimit(): void {\n    if (this.items.length > this.limit) {\n      this.items.splice(this.limit, this.items.length - this.limit);\n    }\n  }\n}\n","import React from \"react\";\nimport { CoordLocation } from \"../features/search/searchSlice\";\nimport { Location } from \"./Location\";\nimport styles from \"./LocationListItem.module.css\";\n\ninterface Props {\n  location: CoordLocation;\n  onClick(location: CoordLocation): any;\n}\n\nexport const LocationListItem = ({ location, onClick }: Props) => {\n  function handleClick(event: React.MouseEvent<HTMLElement>) {\n    event.stopPropagation();\n    onClick(location);\n  }\n\n  return (\n    <li className={styles.item} onClick={handleClick}>\n      <Location name={location.name} />\n    </li>\n  );\n};\n","import React from \"react\";\nimport { CoordLocation } from \"../features/search/searchSlice\";\nimport styles from \"./LocationList.module.css\";\nimport { LocationListItem } from \"./LocationListItem\";\n\ninterface Props {\n  locations: CoordLocation[];\n  onSelect(location: CoordLocation): any;\n}\n\nexport const LocationList = ({ locations, onSelect }: Props) => {\n  return (\n    <ul className={styles.list}>\n      {locations.map((location) => (\n        <LocationListItem\n          location={location}\n          key={location.id || location.name}\n          onClick={onSelect}\n        />\n      ))}\n    </ul>\n  );\n};\n","import { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport styles from \"./LocationSearchInput.module.css\";\r\n\r\ninterface Props {\r\n  value: string;\r\n  onChange(event: React.FormEvent<HTMLInputElement>): void;\r\n  onCancel(event: React.MouseEvent<HTMLElement>): void;\r\n}\r\n\r\nexport const LocationSearchInput = ({ value, onChange, onCancel }: Props) => {\r\n  function focusInput(input: HTMLInputElement) {\r\n    setTimeout(() => {\r\n      if (input) {\r\n        input.focus();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.icon}>\r\n        <FontAwesomeIcon icon={faMapMarkerAlt} />\r\n      </div>\r\n      <input\r\n        className={styles.input}\r\n        placeholder=\"Station\"\r\n        ref={focusInput}\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={onChange}\r\n      />\r\n      <button className={styles.cancelButton} onClick={onCancel}>\r\n        Avbryt\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\nimport { searchLocation } from \"../api\";\nimport { CoordLocation, StopLocation } from \"../features/search/searchSlice\";\nimport useDebounce from \"../hooks\";\nimport MruCache from \"../MruCache\";\nimport { list, merge, removeDuplicates } from \"../util\";\nimport { LocationList } from \"./LocationList\";\nimport styles from \"./LocationSearch.module.css\";\nimport { LocationSearchInput } from \"./LocationSearchInput\";\n\ninterface Props {\n  onCancel(): void;\n  onSelect(location: CoordLocation): void;\n}\n\nexport const LocationSearch = ({ onCancel, onSelect }: Props) => {\n  const recentLocations: MruCache<StopLocation> = new MruCache(10);\n\n  const [locationState, setLocationState] = useState<CoordLocation[]>(\n    recentLocations.getMostRecentlyUsed()\n  );\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [quickLocation, setQuickLocation] = useState<\n    CoordLocation | undefined\n  >();\n\n  const debouncedSearchValue = useDebounce(searchValue, 250);\n\n  useEffect(() => {\n    if (!debouncedSearchValue) {\n      return;\n    }\n\n    searchLocation(debouncedSearchValue).then((response) => {\n      const coordLocations = list(response.LocationList.CoordLocation);\n      const stopLocations = list(response.LocationList.StopLocation);\n      const locations = merge(\n        coordLocations,\n        stopLocations,\n        (a: CoordLocation, b: CoordLocation) => Number(a.idx) - Number(b.idx)\n      );\n      setLocationState(locations);\n    });\n  }, [debouncedSearchValue]);\n\n  function renderResults() {\n    if (!locationState.length && !quickLocation) {\n      return null;\n    }\n\n    const allLocations: CoordLocation[] = quickLocation\n      ? removeDuplicates(\n          [quickLocation, ...locationState],\n          (location) => location.id || location.name\n        )\n      : locationState;\n\n    return (\n      <div className={styles.results}>\n        <LocationList locations={allLocations} onSelect={handleSelect} />\n      </div>\n    );\n  }\n\n  function handleChange(event: React.FormEvent<HTMLInputElement>) {\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n\n    setSearchValue(value);\n    setQuickLocation(recentLocations.getFirstMatch(value));\n\n    if (!value) {\n      showMostRecentlyUsed();\n    }\n  }\n\n  function showMostRecentlyUsed() {\n    setLocationState(recentLocations.getMostRecentlyUsed());\n  }\n\n  function handleCancel(event: React.MouseEvent<HTMLElement>) {\n    event.stopPropagation();\n    onCancel();\n  }\n\n  function handleSelect(location: CoordLocation) {\n    onSelect(location);\n    if (location.id) {\n      recentLocations.add(location as StopLocation);\n    }\n  }\n\n  return (\n    <div className={styles.search}>\n      <LocationSearchInput\n        value={searchValue}\n        onChange={handleChange}\n        onCancel={handleCancel}\n      />\n      {renderResults()}\n    </div>\n  );\n};\n","import { useEffect, useState } from \"react\";\n\n// https://dev.to/gabe_ragland/debouncing-with-react-hooks-jci\nexport default function useDebounce<T>(value: T, delay: number) {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedValue(value), delay);\n    return () => clearTimeout(handler);\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n","import { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Modal.css\";\n\nexport const Modal = ({ children }: any) => {\n  const el: HTMLDivElement = document.createElement(\"div\");\n\n  useEffect(() => {\n    const body = document.getElementsByTagName(\"body\")[0] as HTMLBodyElement;\n    const modalRoot = document.getElementById(\"modal-root\") as HTMLDivElement;\n\n    body.classList.add(\"noscroll\");\n    el.classList.add(\"modal\");\n    modalRoot.appendChild(el);\n\n    return () => {\n      body.classList.remove(\"noscroll\");\n      modalRoot.removeChild(el);\n    };\n  }, [el]);\n\n  return ReactDOM.createPortal(children, el);\n};\n","import classnames from \"classnames\";\nimport React, { useState } from \"react\";\nimport { CoordLocation } from \"../features/search/searchSlice\";\nimport { Location } from \"./Location\";\nimport styles from \"./LocationInput.module.css\";\nimport { LocationSearch } from \"./LocationSearch\";\nimport { Modal } from \"./Modal\";\n\ninterface Props {\n  disabled: boolean;\n  selected: CoordLocation;\n  onSelect(location: CoordLocation): any;\n}\n\nexport const LocationInput = ({ disabled, selected, onSelect }: Props) => {\n  const [overlay, setOverlay] = useState(false);\n  const name = selected.name;\n\n  function renderOverlay() {\n    return (\n      <Modal>\n        <LocationSearch onCancel={handleCancel} onSelect={handleSelect} />\n      </Modal>\n    );\n  }\n\n  function handleFocus() {\n    setOverlay(true && !disabled);\n  }\n\n  function handleCancel() {\n    setOverlay(false);\n  }\n\n  function handleSelect(location: CoordLocation) {\n    setOverlay(false);\n    onSelect(location);\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      {overlay && renderOverlay()}\n      {name && <Location name={name} />}\n      <input\n        type=\"text\"\n        className={classnames(styles.fakeInput, { [styles.static]: !name })}\n        onFocus={handleFocus}\n        placeholder={!name ? \"Hållplats\" : \"\"}\n      />\n    </div>\n  );\n};\n","import { faExchangeAlt, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport classnames from \"classnames\";\nimport React from \"react\";\nimport { CoordLocation, LocationName } from \"../features/search/searchSlice\";\nimport { DatetimeInput } from \"./DatetimeInput\";\nimport { LocationInput } from \"./LocationInput\";\nimport styles from \"./SearchBar.module.css\";\n\ninterface Props {\n  origin: CoordLocation;\n  destination: CoordLocation;\n  date: Date;\n  now: boolean;\n  searching: boolean;\n  onDatetimeChange(date: Date): any;\n  onLocationChange(inputName: LocationName, location: CoordLocation): any;\n  onLocationSwitch(): any;\n  onNowButtonClick(): void;\n  onSearch(): any;\n}\n\nexport const SearchBar = ({\n  origin,\n  destination,\n  date,\n  now,\n  searching,\n  onDatetimeChange,\n  onLocationChange,\n  onLocationSwitch,\n  onNowButtonClick,\n  onSearch,\n}: Props) => {\n  function onOriginSelected(location: CoordLocation) {\n    onLocationChange(\"origin\", location);\n  }\n\n  function onDestinationSelected(location: CoordLocation) {\n    onLocationChange(\"destination\", location);\n  }\n\n  function search() {\n    onSearch();\n  }\n\n  return (\n    <div>\n      <div className={styles.locations}>\n        <div className={styles.inputs}>\n          <LocationInput\n            disabled={searching}\n            selected={origin}\n            onSelect={onOriginSelected}\n          />\n          <LocationInput\n            disabled={searching}\n            selected={destination}\n            onSelect={onDestinationSelected}\n          />\n        </div>\n        <button\n          className={styles.switchLocationsButton}\n          onClick={onLocationSwitch}\n        >\n          <FontAwesomeIcon\n            className={styles.switchLocationsIcon}\n            icon={faExchangeAlt}\n            rotation={90}\n          />\n        </button>\n      </div>\n      <div className={styles.datetime}>\n        <DatetimeInput\n          date={date}\n          now={now}\n          onChange={onDatetimeChange}\n          onNowButtonClick={onNowButtonClick}\n        />\n      </div>\n      <button\n        className={styles.searchButton}\n        onClick={search}\n        disabled={searching || !origin.name || !destination.name}\n      >\n        {searching ? (\n          <span>\n            Söker...\n            <FontAwesomeIcon\n              className={classnames(styles.spinnerIcon, \"right-icon\")}\n              icon={faSpinner}\n              spin={true}\n            />\n          </span>\n        ) : (\n          <span>Sök resa</span>\n        )}\n      </button>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Leg, Location, Trip } from \"../features/trips/tripsSlice\";\nimport styles from \"./TripDetails.module.css\";\n\ninterface Props {\n  trip: Trip;\n}\n\nexport const TripDetails = ({ trip }: Props) => {\n  function renderLegs() {\n    return trip.Leg.filter((leg) => leg.type !== \"WALK\").map((leg, index) =>\n      renderLeg(leg, index)\n    );\n  }\n\n  function renderLeg(leg: Leg, index: number) {\n    return (\n      <li className={styles.leg} key={index}>\n        {renderLocation(leg.Origin)}\n        <div className={styles.direction}>\n          {leg.name} mot {leg.direction}\n        </div>\n        {renderLocation(leg.Destination)}\n      </li>\n    );\n  }\n\n  function renderLocation(location: Location) {\n    return (\n      <div className={styles.location}>\n        <div className={styles.overview}>\n          <div className={styles.time}>{location.time}</div>\n          <div className={styles.name}>{location.name}</div>\n          <div className={styles.track}>\n            {location.track && \"Läge \" + location.track}\n          </div>\n        </div>\n        {location.Notes && (\n          <ul className={styles.notes}>\n            {location.Notes.Note.map((note, index) => (\n              <li key={index}>{note.$}</li>\n            ))}\n          </ul>\n        )}\n      </div>\n    );\n  }\n\n  return <ul className={styles.legs}>{renderLegs()}</ul>;\n};\n","import { faArrowRight, faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport classnames from \"classnames\";\nimport dayjs from \"dayjs\";\nimport React from \"react\";\nimport { Leg, Location, Trip } from \"../features/trips/tripsSlice\";\nimport { first, last, padNumber } from \"../util\";\nimport styles from \"./TripOverview.module.css\";\n\ninterface Props {\n  trip: Trip;\n  onClick(): void;\n}\n\nexport const TripOverview = ({ trip, onClick }: Props) => {\n  const origin = first(trip.Leg).Origin;\n  const destination = last(trip.Leg).Destination;\n\n  function renderTime(location: Location, renderInfoIcon = false) {\n    return [\n      <span key={0}>\n        {location.rtTime ?? location.time}\n        {renderInfoIcon && (\n          <FontAwesomeIcon\n            className={classnames(styles.notesIcon, \"right-icon\")}\n            icon={faInfoCircle}\n          />\n        )}\n      </span>,\n      location.rtTime && location.time !== location.rtTime && (\n        <s className={classnames(styles.time, styles.invalid)} key={1}>\n          {location.time}\n        </s>\n      ),\n    ];\n  }\n\n  function renderLegs() {\n    return trip.Leg.filter((leg) => leg.sname).map((leg, index) =>\n      renderLeg(leg, index)\n    );\n  }\n\n  function renderLeg(leg: Leg, index: number) {\n    return (\n      <span\n        className={styles.leg}\n        key={index}\n        style={{\n          backgroundColor: leg.fgColor,\n          borderColor: leg.fgColor === \"#ffffff\" ? \"#EE1844\" : \"transparent\",\n          color: leg.bgColor,\n        }}\n      >\n        {leg.sname}\n      </span>\n    );\n  }\n\n  function travelTime(start: Location, end: Location) {\n    const startDate = dayjs(\n      `${start.rtDate || start.date} ${start.rtTime || start.time}`\n    );\n    const endDate = dayjs(\n      `${end.rtDate || end.date} ${end.rtTime || end.time}`\n    );\n    const hourDiff = endDate.diff(startDate, \"hour\");\n    const minuteDiff = endDate.diff(startDate, \"minute\") % 60;\n    return padNumber(hourDiff) + \":\" + padNumber(minuteDiff);\n  }\n\n  function showInfoIcon() {\n    return trip.Leg.some((leg) => leg.Origin.Notes || leg.Destination.Notes);\n  }\n\n  return (\n    <div className={styles.overview} onClick={onClick}>\n      <div className={styles.origin}>\n        <div>{renderTime(origin, showInfoIcon())}</div>\n        <div className={styles.legs}>{renderLegs()}</div>\n      </div>\n      <FontAwesomeIcon icon={faArrowRight} />\n      <div className={styles.destination}>\n        <div>{renderTime(destination)}</div>\n        <div className={styles.travelTime}>\n          Restid: {travelTime(origin, destination)}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Trip } from \"../features/trips/tripsSlice\";\nimport { TripDetails } from \"./TripDetails\";\nimport styles from \"./TripListItem.module.css\";\nimport { TripOverview } from \"./TripOverview\";\n\ninterface Props {\n  trip: Trip;\n}\n\nexport const TripListItem = ({ trip }: Props) => {\n  const [expanded, setExpanded] = useState(false);\n\n  function handleClick() {\n    setExpanded(!expanded);\n  }\n\n  return (\n    <div className={styles.item}>\n      <TripOverview trip={trip} onClick={handleClick} />\n      {expanded && <TripDetails trip={trip} />}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Trip } from \"../features/trips/tripsSlice\";\nimport styles from \"./TripList.module.css\";\nimport { TripListItem } from \"./TripListItem\";\n\ninterface Props {\n  trips: Trip[];\n}\n\nexport const TripList = ({ trips }: Props) => {\n  return (\n    <ul className={styles.list}>\n      {trips.map((trip, tripIndex) => (\n        <li key={tripIndex}>\n          <TripListItem trip={trip} />\n        </li>\n      ))}\n    </ul>\n  );\n};\n","import React from \"react\";\nimport { Trip } from \"../features/trips/tripsSlice\";\nimport styles from \"./SearchResult.module.css\";\nimport { TripList } from \"./TripList\";\n\ninterface Props {\n  trips: Trip[];\n  onShowEarlier(): void;\n  onShowLater(): void;\n}\n\nexport const SearchResult = (props: Props) => {\n  return (\n    <div>\n      <TripList trips={props.trips} />\n      <div className={styles.earlierLaterButtons}>\n        <button\n          className={styles.earlierLaterButton}\n          onClick={props.onShowEarlier}\n        >\n          Tidigare\n        </button>\n        <button\n          className={styles.earlierLaterButton}\n          onClick={props.onShowLater}\n        >\n          Senare\n        </button>\n      </div>\n    </div>\n  );\n};\n","import { faBus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport dayjs from \"dayjs\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SearchBar } from \"../components/SearchBar\";\nimport { SearchResult } from \"../components/SearchResult\";\nimport {\n  CoordLocation,\n  LocationName,\n  setDate,\n  setLocation,\n  switchLocations,\n} from \"../features/search/searchSlice\";\nimport { clearTrips, fetchTrips } from \"../features/trips/tripsSlice\";\nimport styles from \"./App.module.css\";\nimport { RootState } from \"./rootReducer\";\n\nconst ErrorMessage = (props: { error: string }) => (\n  <div className={styles.error}>{props.error}</div>\n);\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch();\n\n  const { tripsLoading, tripsError, trips } = useSelector(\n    (state: RootState) => ({\n      tripsLoading: state.trips.loading,\n      tripsError: state.trips.error,\n      trips: state.trips.trips,\n    })\n  );\n\n  const {\n    searchOrigin,\n    searchDestination,\n    searchDate,\n    searchNow,\n  } = useSelector((state: RootState) => ({\n    searchOrigin: state.search.origin,\n    searchDestination: state.search.destination,\n    searchDate: new Date(state.search.date),\n    searchNow: state.search.now,\n  }));\n\n  function handleNavBarClick() {\n    dispatch(clearTrips());\n  }\n\n  function renderMainContent() {\n    if (tripsError) {\n      return <ErrorMessage error={tripsError} />;\n    } else if (trips.length) {\n      return renderSearchResult();\n    } else {\n      return renderSearchBar();\n    }\n  }\n\n  function renderSearchBar() {\n    return (\n      <SearchBar\n        origin={searchOrigin}\n        destination={searchDestination}\n        date={searchDate}\n        now={searchNow}\n        searching={tripsLoading}\n        onDatetimeChange={handleDatetimeChange}\n        onLocationChange={handleLocationChange}\n        onLocationSwitch={handleSwitchLocations}\n        onNowButtonClick={handleNowButtonClick}\n        onSearch={handleSearch}\n      />\n    );\n  }\n\n  function renderSearchResult() {\n    return (\n      <SearchResult\n        trips={trips}\n        onShowEarlier={findEarlierTrips}\n        onShowLater={findLaterTrips}\n      />\n    );\n  }\n\n  function handleDatetimeChange(date: Date) {\n    dispatch(setDate({ date: date.toISOString(), now: false }));\n  }\n\n  function handleLocationChange(name: LocationName, location: CoordLocation) {\n    dispatch(setLocation({ name, location }));\n  }\n\n  function handleNowButtonClick() {\n    dispatch(setDate({ date: new Date().toISOString(), now: true }));\n  }\n\n  function handleSwitchLocations() {\n    dispatch(switchLocations());\n  }\n\n  function handleSearch() {\n    let date = searchDate;\n    if (searchNow) {\n      date = new Date();\n      dispatch(setDate({ date: date.toISOString(), now: true }));\n    }\n    search(date);\n  }\n\n  function search(date: Date) {\n    dispatch(fetchTrips(searchOrigin, searchDestination, date));\n  }\n\n  function findEarlierTrips() {\n    searchAddMinutes(-20);\n  }\n\n  function findLaterTrips() {\n    searchAddMinutes(20);\n  }\n\n  function searchAddMinutes(minutes: number) {\n    const newDate = dayjs(searchDate).add(minutes, \"minute\").toDate();\n    dispatch(setDate({ date: newDate.toISOString(), now: searchNow }));\n    search(newDate);\n  }\n\n  return (\n    <React.StrictMode>\n      <div className={styles.app}>\n        <nav className={styles.navbar}>\n          <button onClick={handleNavBarClick}>\n            <FontAwesomeIcon className={styles.logo} icon={faBus} />\n            Reaktiv Västtrafik\n          </button>\n        </nav>\n        {renderMainContent()}\n      </div>\n    </React.StrictMode>\n  );\n};\n\nexport default App;\n"],"sourceRoot":""}